apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: ratelimit
  namespace: default
spec:
  rateLimit:
    average: 5
    burst: 5
    period: 1m

---
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: stripprefix
  namespace: default
spec:
  stripPrefix:
    prefixes:
      - "/"

---
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: limit
  namespace: default
spec:
  buffering:
    retryExpression: "ResponseCode()==500"
---

---
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: retry
spec:
  retry:
    attempts: 5
    initialInterval: 5000ms

---
